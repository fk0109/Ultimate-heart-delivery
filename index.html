<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Ultimate Heart Delivery ðŸ’–</title>

<style>
body{
  margin:0;
  background:linear-gradient(135deg,#fff0f6,#ffffff);
  overflow:hidden;
  font-family:'Comic Sans MS', cursive;
  text-align:center;
  transition:0.3s;
}

/*sound, special object and bgm*/
body.SS{
   <audio id="bgm" src="bgm.mp3" loop></audio>
   <audio id="bonusSound" src="bonus.mp3"></audio>
   obj.innerHTML='<img src="special.png">';
} 

/* CHAOS MODE = BLACK BACKGROUND */
body.chaos{
  background:black !important;
}

/* CHAOS TEXT */
#chaosText{
  position:fixed;
  top:40%;
  left:50%;
  transform:translate(-50%,-50%);
  font-size:70px;
  font-weight:bold;
  color:red;
  display:none;
  z-index:999;
  animation:pulse 0.5s infinite;
}
@keyframes pulse{
  0%{ transform:translate(-50%,-50%) scale(1); }
  50%{ transform:translate(-50%,-50%) scale(1.1); }
  100%{ transform:translate(-50%,-50%) scale(1); }
}

/* START SCREEN */
#startScreen{
  position:fixed;
  width:100%;
  height:100%;
  background:linear-gradient(135deg,#ffd6e7,#ffffff);
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  z-index:10;
  padding:20px;
}

/* END SCREEN CENTER */
#endScreen{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,0.85);
  display:none;
  justify-content:center;
  align-items:center;
  z-index:1000;
}

#endBox{
  background:#111;
  padding:40px 60px;
  border-radius:25px;
  box-shadow:0 0 40px hotpink;
  color:white;
  text-align:center;
}

#endBox h2{
  font-size:40px;
  margin:0;
}

#endBox p{
  font-size:26px;
  margin:15px 0;
}

.startBtn{
  padding:15px 35px;
  font-size:22px;
  border:none;
  border-radius:40px;
  background:#ff69b4;
  color:white;
  cursor:pointer;
}

#topbar{
  display:flex;
  justify-content:space-around;
  font-size:18px;
  color:#ff1493;
}

#gameArea{
  position:relative;
  width:100%;
  height:75vh;
  overflow:hidden;
}

/* HEART SIZE 1.5x */
.object{
  position:absolute;
  font-size:42px; /* 28 x 1.5 */
  animation:fall linear;
}

.object img{
  width:100px;
  height:100px;
}

@keyframes fall{
  from{ top:-50px; }
  to{ top:100vh; }
}

#basket{
  position:absolute;
  bottom:20px;
  left:50%;
  transform:translateX(-50%);
  font-size:100px;
  pointer-events:none;
}
</style>
</head>
<body>

<div id="chaosText">ðŸ”¥ CHAOS MODE ðŸ”¥</div>

<div id="startScreen">
  <h1>ðŸ’– Ultimate Heart Delivery ðŸ’–</h1>
  <p>ðŸ’— +1 | ðŸ’› +5 | ðŸ’” -10 | Special Object +50</p>
  <p>The last 10 seconds = ðŸ”¥ CHAOS MODE ðŸ”¥</p>
  <p>Total Time: 60 seconds</p>
  <button class="startBtn" onclick="startGame()">Start Game</button>
</div>

<h1>Catch the Hearts ðŸ’–</h1>

<div id="topbar">
  <div>Score: <span id="score">0</span></div>
  <div>Time: <span id="time">60</span>s</div>
</div>

<div id="gameArea">
  <div id="basket">ðŸ§º</div>
</div>

<!-- END SCREEN -->
<div id="endScreen">
  <div id="endBox">
    <h2>ðŸ’˜ Round Complete!</h2>
    <p id="finalScore"></p>
    <button class="startBtn" onclick="location.reload()">Play Again</button>
  </div>
</div>

<audio id="bonusSound" src="bonus.mp3"></audio>

<script>
let score=0;
let totalTime=60;
let timeLeft=60;
let specialCount=0;
let chaosMode=false;

let basket=document.getElementById("basket");
let scoreDisplay=document.getElementById("score");
let timeDisplay=document.getElementById("time");
let finalScore=document.getElementById("finalScore");
let gameArea=document.getElementById("gameArea");
let bonusSound=document.getElementById("bonusSound");
let chaosText=document.getElementById("chaosText");
let endScreen=document.getElementById("endScreen");

let gameRunning=false;
let heartInterval;

/* Start */
function startGame(){
  document.getElementById("startScreen").style.display="none";
  gameRunning=true;
  countdown();
  heartInterval=setInterval(createHeart,300);
  setInterval(createSpecial,700);
}

/* Mouse Control */
document.addEventListener("mousemove",function(e){
  if(!gameRunning) return;
  basket.style.left=e.clientX+"px";
});

/* Create Hearts */
function createHeart(){
  if(!gameRunning) return;

  let obj=document.createElement("div");
  obj.className="object";

  let type=Math.random();
  let value=1;

  if(type<0.15){ obj.innerHTML="ðŸ’›"; value=5; }
  else if(type<0.30){ obj.innerHTML="ðŸ’”"; value=-10; }
  else{ obj.innerHTML="ðŸ’—"; }

  obj.style.left=Math.random()*window.innerWidth+"px";

  let speed=chaosMode?1:3-(timeLeft/totalTime)*1.5;
  obj.style.animationDuration=speed+"s";

  gameArea.appendChild(obj);
  collisionCheck(obj,value,false);
}

/* Special */
function createSpecial(){
  if(!gameRunning) return;
  if(Math.random()>0.08) return;

  let obj=document.createElement("div");
  obj.className="object";
  obj.innerHTML='<img src="special.png">';
  obj.style.left=Math.random()*window.innerWidth+"px";
  obj.style.animationDuration="2s";

  gameArea.appendChild(obj);
  collisionCheck(obj,50,true);
}

/* Collision */
function collisionCheck(obj,value,isSpecial){
  let check=setInterval(()=>{
    let o=obj.getBoundingClientRect();
    let b=basket.getBoundingClientRect();

    if(o.bottom>=b.top && o.left<b.right && o.right>b.left){
      score+=value;
      if(score<0) score=0;
      scoreDisplay.innerText=score;

      if(isSpecial){
        specialCount++;
        bonusSound.currentTime=0;
        bonusSound.play();
      }

      obj.remove();
      clearInterval(check);
    }

    if(o.top>window.innerHeight){
      obj.remove();
      clearInterval(check);
    }
  },30);
}

/* Countdown */
function countdown(){
  let timer=setInterval(()=>{
    if(!gameRunning){ clearInterval(timer); return; }

    timeLeft--;
    timeDisplay.innerText=timeLeft;

    if(timeLeft===10) activateChaos();

    if(timeLeft<=0){
      gameRunning=false;
      clearInterval(timer);
      endGame();
    }
  },1000);
}

/* Chaos */
function activateChaos(){
  chaosMode=true;
  document.body.classList.add("chaos");
  chaosText.style.display="block";
  clearInterval(heartInterval);
  heartInterval=setInterval(createHeart,100);
}

/* End Game */
function endGame(){
  chaosText.style.display="none";
  document.body.classList.remove("chaos");

  finalScore.innerHTML=
    "Final Score: "+score+
    "<br>Special Collected: "+specialCount+
    "<br>Total Time: "+totalTime+" seconds";

  endScreen.style.display="flex";
}


</script>

</body>
</html>
